@{
    ViewData["Title"] = "Index";
}
<link href="~/css/task.css" rel="stylesheet" type="text/css" />
<h2>Documentos</h2>
<table class="table table-hover" id="tblUsuarios" style="table-layout:fixed; width:100%; word-wrap:break-word;">
    <thead>
        <tr>
            <th>
                Nombre
            </th>
            <th>
                Acción
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (string fileString in ViewBag.fileList)
        {
            <tr>
                <td>
                    <span>
                        @fileString
                    </span>
                </td>
                <td>
                    <a href="#myModal"data-toggle="modal"id=@fileString class="btn btn-warning divView">
                        <i class="fa fa-search">
                            Ver
                        </i>
                    </a>
                    <a href="https://deltacargostorage.blob.core.windows.net/pdf/@fileString"class="btn btn-primary">
                        <i class="fa fa-file-o">
                            Descargar
                        </i>
                    </a>
                    <a href="/File/Delete/@fileString" class="btn btn-danger">
                        <i class="fa fa-key">
                            Eliminar
                        </i>
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>
@if (ViewBag.response == 1)
{
    <script>
        alert("Eliminado correctamente");
    </script>
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="height:90%">
        <div class="modal-content" style="height:100%">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Visor </h4>
            </div>
            <div class="modal-body" style="height:80%">
                <!--<iframe src="https://docs.google.com/gview?url=https://uploadedfiles.blob.core.windows.net/pdf/Per%C3%BA_DespachoAnticipado-SolicitarCRT(327).pdf&embedded=true"
                        style="width: 100%; height:  500px;color:black;"
                        frameborder="0" />-->
                <iframe id="toView" src="https://docs.google.com/gview?url=https://uploadedfiles.blob.core.windows.net/pdf/Per%C3%BA_DespachoAnticipado-SolicitarCRT(327).pdf&embedded=true"
                        style="width: 100%; height:100%;"
                        frameborder="0"></iframe>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script src="~/js/jQuery-3.4.1.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $(".divView").click(function () {
            $("#toView").attr("src", "https://docs.google.com/gview?url=https://deltacargostorage.blob.core.windows.net/pdf/" + $(this).attr("id") + "&embedded=true");
        });
    });
</script>